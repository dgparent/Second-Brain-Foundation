# NextGen Sanity Check Amendments V2.0

**Generated By:** BMad Orchestrator Party Mode  
**Analysis Date:** December 28, 2025  
**Scope:** Comprehensive gap analysis of Phases 00-08 vs PRD v2.0  

---

## Executive Summary

After thorough re-investigation of all NextGen phase documents against the PRD v2.0 requirements, this document identifies **critical blind spots**, **missed opportunities**, and proposes **additional phases (09-11)** to ensure Second Brain Foundation becomes a complete, production-ready knowledge management platform.

### Key Findings

| Category | Count | Severity |
|----------|-------|----------|
| Critical PRD Requirements Missing | 12 | ðŸ”´ CRITICAL |
| Partial Implementations | 5 | ðŸŸ¡ HIGH |
| Optimization Opportunities | 15 | ðŸŸ¢ MEDIUM |
| New Phases Recommended | 3 | ðŸ”´ CRITICAL |

---

## Part 1: PRD Requirement Gap Matrix

### 1.1 Core Framework Requirements (FR1-FR10)

| Requirement | PRD Spec | Current Implementation | Gap Status |
|-------------|----------|----------------------|------------|
| FR1: Hierarchical folder structure | Daily/, People/, Places/, Topics/, Projects/, Transitional/ | None - using flat notebooks only | ðŸ”´ MISSING |
| FR2: Entity templates | YAML frontmatter with universal parameters | None - sources have basic metadata only | ðŸ”´ MISSING |
| FR3: Entity types | Extensible type system (Person, Place, Topic, Project, Note, Artifact, Event, Task, Process) | Only "source" and "note" types | ðŸ”´ MISSING |
| FR4: Auto-filed location storage | Store detected topics/locations as entities | Entity extraction exists but no filing | ðŸŸ¡ PARTIAL |
| FR5: Obsidian wikilinks | `[[UID]]` syntax for relationships | Not implemented | ðŸ”´ MISSING |
| FR6: Universal parameters | uid, type, created_at, modified_at, relationships, sensitivity, truth_level | Only basic fields implemented | ðŸ”´ MISSING |
| FR7: Created_at immutability | Never modified after creation | Not enforced | ðŸŸ¡ PARTIAL |
| FR8: Modified_at auto-update | Update on any content/metadata change | Implemented in BaseEntity | âœ… DONE |
| FR9: Truth_level hierarchy | L1-L3, U1-U3 levels | Only mentioned in blueprint, not implemented | ðŸ”´ MISSING |
| FR10: UID format | `{type}-{slug}-{counter}` | Using UUIDs instead | ðŸŸ¡ PARTIAL |

### 1.2 Relationship & Lifecycle Requirements (FR11-FR14)

| Requirement | PRD Spec | Current Implementation | Gap Status |
|-------------|----------|----------------------|------------|
| FR11: Typed relationships | Array of `{target_uid, type, context}` | Graph has relations but flat type system | ðŸŸ¡ PARTIAL |
| FR12: Allowed types | informs, uses, occurs_at, authored_by, etc. | Not standardized | ðŸ”´ MISSING |
| FR13: 48-hour lifecycle | Notes expire from Daily/ after 48h | No lifecycle management at all | ðŸ”´ MISSING |
| FR14: Lifecycle states | captured, transitional, permanent, archived | Not implemented | ðŸ”´ MISSING |

### 1.3 Privacy & Security Requirements (FR15-FR21)

| Requirement | PRD Spec | Current Implementation | Gap Status |
|-------------|----------|----------------------|------------|
| FR15: Sensitivity tiers | public, personal, confidential, secret | Not implemented | ðŸ”´ MISSING |
| FR16: Default sensitivity | "personal" if unspecified | Not implemented | ðŸ”´ MISSING |
| FR17: Sensitivity inheritance | Inherit from parent entity | Not implemented | ðŸ”´ MISSING |
| FR18: Context permissions | cloud_ai_allowed, local_ai_allowed, etc. | Not implemented | ðŸ”´ MISSING |
| FR19: Secret blocking | Never process "secret" with any AI | Not implemented | ðŸ”´ MISSING |
| FR20: BMOM framework | because, meaning, outcome, measure | Not implemented | ðŸ”´ MISSING |
| FR21: Override tracking | override.human_last timestamp | Not implemented | ðŸ”´ MISSING |

### 1.4 Advanced Requirements (FR22-FR25)

| Requirement | PRD Spec | Current Implementation | Gap Status |
|-------------|----------|----------------------|------------|
| FR22: Relationship vocabulary | Full vocabulary including custom types | Not standardized | ðŸ”´ MISSING |
| FR23: Entity metadata extensions | source_meta, artifact_meta, event_meta, etc. | Partial for sources only | ðŸŸ¡ PARTIAL |
| FR24: SHA-256 checksum | Content integrity verification | Not implemented | ðŸ”´ MISSING |
| FR25: Confidence scoring | 0.0-1.0 with human review workflows | Partial in entity extraction | ðŸŸ¡ PARTIAL |

---

## Part 2: Phase-Specific Blind Spots & Enhancements

### 2.1 Phase 00: Foundation Infrastructure

**Existing Blind Spots Identified:** âœ… Good coverage  
**Additional Blind Spots:**

| ID | Blind Spot | Impact | Mitigation |
|----|------------|--------|------------|
| 00.BS.7 | **No Entity Type Registry** | Can't extend entity types | Add extensible type system in domain-base |
| 00.BS.8 | **No UID Generator Service** | PRD requires `{type}-{slug}-{counter}` format | Create UID generator with collision handling |
| 00.BS.9 | **No Change Detection System** | PRD FR21 requires tracking manual overrides | Add file hashing and change tracking |
| 00.BS.10 | **No Lifecycle State Machine** | FR13-14 require state transitions | Implement lifecycle manager |

**Enhancement Tasks to Add:**

```markdown
| ID | Task | Effort | Sprint |
|----|------|--------|--------|
| 00.X.1 | Create EntityTypeRegistry | 4h | 00.2 |
| 00.X.2 | Implement UIDGenerator service | 4h | 00.2 |
| 00.X.3 | Add ChangeDetectionService with SHA-256 | 6h | 00.5 |
| 00.X.4 | Create LifecycleStateMachine | 8h | 00.5 |
```

---

### 2.2 Phase 01: AI Infrastructure

**Existing Blind Spots Identified:** âœ… Good coverage  
**Additional Blind Spots:**

| ID | Blind Spot | Impact | Mitigation |
|----|------------|--------|------------|
| 01.BS.5 | **No Sensitivity-Based Model Selection** | FR18-19 require AI access control | Add sensitivity filter before model calls |
| 01.BS.6 | **No Confidence Scoring Pipeline** | FR25 requires thresholds | Add confidence calculation to all AI outputs |
| 01.BS.7 | **No Truth Level Tagging** | FR9 requires L1-L3, U1-U3 | Auto-tag AI outputs as L3, allow promotion |
| 01.BS.8 | **Local AI First Not Emphasized** | PRD prioritizes local AI | Add Ollama/LMStudio as primary providers |

**Enhancement Tasks:**

```markdown
| ID | Task | Effort | Sprint |
|----|------|--------|--------|
| 01.X.1 | Add SensitivityFilter middleware | 4h | 01.2 |
| 01.X.2 | Implement ConfidenceScorer | 6h | 01.2 |
| 01.X.3 | Add TruthLevelTagger | 4h | 01.3 |
| 01.X.4 | Prioritize Ollama in ModelManager | 4h | 01.1 |
```

---

### 2.3 Phase 02: Chat & Search

**Existing Blind Spots Identified:** âœ… Good coverage  
**Additional Blind Spots:**

| ID | Blind Spot | Impact | Mitigation |
|----|------------|--------|------------|
| 02.BS.7 | **No Sensitivity Filtering in RAG** | Secret content could leak to AI | Filter by sensitivity before context building |
| 02.BS.8 | **No BMOM-Aware Chat** | BMOM context enhances responses | Include BMOM metadata in RAG context |
| 02.BS.9 | **No Wikilink Resolution** | PRD requires `[[UID]]` support | Parse and resolve wikilinks in content |
| 02.BS.10 | **No Relationship-Aware Search** | Can't search by relationship types | Add relationship facets to search |

**Enhancement Tasks:**

```markdown
| ID | Task | Effort | Sprint |
|----|------|--------|--------|
| 02.X.1 | Add sensitivity filter to ContextBuilder | 4h | 02.2 |
| 02.X.2 | Include BMOM in context prompts | 3h | 02.2 |
| 02.X.3 | Create WikilinkResolver | 6h | 02.3 |
| 02.X.4 | Add relationship facets to search | 4h | 02.3 |
```

---

### 2.4 Phase 03: Transformations & Insights

**Existing Blind Spots Identified:** âœ… Good (7 identified)  
**Additional Blind Spots:**

| ID | Blind Spot | Impact | Mitigation |
|----|------------|--------|------------|
| 03.BS.8 | **No Entity Extraction to Filing** | Extracted entities not filed to folders | Add filing step to entity extraction pipeline |
| 03.BS.9 | **No Relationship Detection** | PRD FR11-12 require relationship extraction | Add RelationshipExtractor transformation |
| 03.BS.10 | **No BMOM Generation** | Missing key PRD feature | Add BMOM generation transformation |
| 03.BS.11 | **No Confidence-Based Review Queue** | FR25 requires human review | Create review workflow for low-confidence extractions |

**New Transformation Templates Needed:**

```yaml
# templates/entity-extraction.yaml
name: entity-extraction
title: Entity Extraction
description: Extract entities with UIDs and relationships
output_format: json
output_schema:
  type: object
  properties:
    entities:
      type: array
      items:
        type: object
        properties:
          uid: { type: string }
          type: { type: string, enum: [person, place, topic, project, event] }
          name: { type: string }
          confidence: { type: number }
          relationships: { type: array }
apply_default: true

# templates/bmom-extraction.yaml
name: bmom-extraction
title: BMOM Framework Extraction
description: Extract Because-Meaning-Outcome-Measure from content
output_format: json
output_schema:
  type: object
  properties:
    because: { type: string, description: "Why this content matters" }
    meaning: { type: string, description: "What it means in context" }
    outcome: { type: string, description: "Expected results or implications" }
    measure: { type: string, description: "How to measure success/validity" }
apply_default: true
```

---

### 2.5 Phase 04: Frontend Core

**Existing Blind Spots Identified:** âœ… Good (7 identified)  
**Additional Blind Spots:**

| ID | Blind Spot | Impact | Mitigation |
|----|------------|--------|------------|
| 04.BS.8 | **No Folder View** | PRD requires hierarchical folder navigation | Add folder browser component |
| 04.BS.9 | **No Entity Template UI** | Users can't create entities via templates | Add entity creation wizard |
| 04.BS.10 | **No Relationship Builder UI** | Can't manually link entities | Add relationship management interface |
| 04.BS.11 | **No Lifecycle Status Display** | Users can't see note lifecycle state | Add lifecycle badges and filters |
| 04.BS.12 | **No Sensitivity Picker** | Can't set content sensitivity | Add sensitivity selector component |

**New Components Needed:**

```markdown
| Component | Purpose | Sprint |
|-----------|---------|--------|
| FolderBrowser | Navigate hierarchical structure | 04.2 |
| EntityWizard | Create entities from templates | 04.3 |
| RelationshipBuilder | Link entities with typed relations | 04.3 |
| LifecycleBadge | Display lifecycle state | 04.2 |
| SensitivityPicker | Set sensitivity level | 04.3 |
```

---

### 2.6 Phase 05: Frontend Advanced

**Existing Blind Spots Identified:** âœ… Good (6 identified)  
**Additional Blind Spots:**

| ID | Blind Spot | Impact | Mitigation |
|----|------------|--------|------------|
| 05.BS.7 | **No Review Queue UI** | Can't review low-confidence extractions | Add confidence-based review interface |
| 05.BS.8 | **No BMOM Display** | Can't see BMOM framework data | Add BMOM card component |
| 05.BS.9 | **No Truth Level Indicator** | Users can't see AI vs user content | Add truth level badges |
| 05.BS.10 | **No Override History** | FR21 requires tracking manual decisions | Add override history panel |

---

### 2.7 Phase 06: Audio & Podcast

**Existing Blind Spots Identified:** âœ… Good (6 identified)  
**Additional Blind Spots:**

| ID | Blind Spot | Impact | Mitigation |
|----|------------|--------|------------|
| 06.BS.7 | **No Sensitivity Filtering for TTS** | Secret content could be read aloud | Filter by sensitivity before script generation |
| 06.BS.8 | **No Multi-Language Support** | PRD mentions cross-platform | Add language selection for TTS |

---

### 2.8 Phase 07: Visualization & Knowledge Graphs

**Existing Blind Spots Identified:** âœ… Good (5 identified)  
**Additional Blind Spots:**

| ID | Blind Spot | Impact | Mitigation |
|----|------------|--------|------------|
| 07.BS.6 | **No Relationship Type Visualization** | Can't distinguish relationship types | Color-code edges by relationship type |
| 07.BS.7 | **No Sensitivity-Filtered Graphs** | All content shown regardless of sensitivity | Add sensitivity filter to graph view |
| 07.BS.8 | **No Lifecycle-Aware Visualization** | Can't see note lifecycle in graph | Add lifecycle state to node styling |

---

### 2.9 Phase 08: Production Readiness

**Existing Blind Spots Identified:** âœ… Good (6 identified)  
**Additional Blind Spots:**

| ID | Blind Spot | Impact | Mitigation |
|----|------------|--------|------------|
| 08.BS.7 | **No Obsidian Plugin** | PRD requires Obsidian compatibility | Plan Phase 10 for Obsidian integration |
| 08.BS.8 | **No CLI Tool** | PRD mentions command-line tools | Plan Phase 11 for CLI |
| 08.BS.9 | **No Migration Tools** | PRD requires migration from existing PKM | Add migration utilities |

---

## Part 3: Proposed Additional Phases

### Phase 09: Progressive Organization Engine (NEW)

**Duration:** 3 weeks (15 working days)  
**Priority:** ðŸ”´ CRITICAL  
**Purpose:** Implement core PRD differentiators

```markdown
## Sprint 09.1: Entity Framework (Days 1-5)

### Tasks
| ID | Task | Effort |
|----|------|--------|
| 09.1.1 | Create EntityTypeRegistry with extensibility | 6h |
| 09.1.2 | Implement UIDGenerator service | 4h |
| 09.1.3 | Create entity templates (Person, Place, Topic, Project) | 8h |
| 09.1.4 | Add YAML frontmatter parser/generator | 6h |
| 09.1.5 | Implement wikilink `[[UID]]` parser | 6h |
| 09.1.6 | Create entity filing service | 8h |

### Database Schema
```sql
CREATE TABLE entity_types (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  tenant_id UUID REFERENCES tenants(id),
  name VARCHAR(50) NOT NULL,
  slug VARCHAR(50) NOT NULL,
  schema JSONB NOT NULL, -- JSON Schema for entity metadata
  template TEXT NOT NULL, -- Markdown template
  folder_path VARCHAR(255) NOT NULL,
  icon VARCHAR(50),
  color VARCHAR(20),
  created_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(tenant_id, slug)
);

CREATE TABLE entities (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  tenant_id UUID NOT NULL REFERENCES tenants(id),
  uid VARCHAR(100) NOT NULL, -- {type}-{slug}-{counter}
  type_id UUID NOT NULL REFERENCES entity_types(id),
  name VARCHAR(255) NOT NULL,
  content TEXT,
  metadata JSONB NOT NULL DEFAULT '{}',
  sensitivity VARCHAR(20) DEFAULT 'personal',
  truth_level VARCHAR(10) DEFAULT 'U1',
  lifecycle_state VARCHAR(20) DEFAULT 'captured',
  checksum VARCHAR(64), -- SHA-256
  filed_at TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW(),
  modified_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(tenant_id, uid)
);

CREATE TABLE entity_relationships (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  tenant_id UUID NOT NULL REFERENCES tenants(id),
  source_uid VARCHAR(100) NOT NULL,
  target_uid VARCHAR(100) NOT NULL,
  relationship_type VARCHAR(50) NOT NULL,
  context TEXT,
  confidence DECIMAL(3,2),
  created_at TIMESTAMP DEFAULT NOW(),
  FOREIGN KEY (tenant_id, source_uid) REFERENCES entities(tenant_id, uid),
  FOREIGN KEY (tenant_id, target_uid) REFERENCES entities(tenant_id, uid)
);
```

## Sprint 09.2: Lifecycle Management (Days 6-10)

### Tasks
| ID | Task | Effort |
|----|------|--------|
| 09.2.1 | Implement LifecycleStateMachine | 8h |
| 09.2.2 | Create 48-hour transition scheduler | 6h |
| 09.2.3 | Build auto-summarization on transition | 6h |
| 09.2.4 | Add lifecycle API endpoints | 4h |
| 09.2.5 | Create lifecycle tracking dashboard | 6h |
| 09.2.6 | Implement lifecycle_state filters | 4h |

### Lifecycle State Machine
```typescript
// packages/@sbf/lifecycle-engine/src/LifecycleStateMachine.ts

export enum LifecycleState {
  CAPTURED = 'captured',      // 0-48h in Daily/
  TRANSITIONAL = 'transitional', // Awaiting entity assignment
  PERMANENT = 'permanent',    // Filed with entities
  ARCHIVED = 'archived',      // Deprecated
}

export interface LifecycleTransition {
  from: LifecycleState;
  to: LifecycleState;
  trigger: 'time' | 'entity_assigned' | 'manual' | 'archived';
  conditions: TransitionCondition[];
}

export class LifecycleStateMachine {
  private transitions: LifecycleTransition[] = [
    {
      from: LifecycleState.CAPTURED,
      to: LifecycleState.TRANSITIONAL,
      trigger: 'time',
      conditions: [{ type: 'age_hours', value: 48 }],
    },
    {
      from: LifecycleState.TRANSITIONAL,
      to: LifecycleState.PERMANENT,
      trigger: 'entity_assigned',
      conditions: [{ type: 'has_primary_entity', value: true }],
    },
    // ... more transitions
  ];

  async processTransitions(tenantId: string): Promise<TransitionResult[]> {
    // Find notes ready for transition
    // Apply summarization if needed
    // Update lifecycle state
    // Move to appropriate folder (conceptually)
  }
}
```

## Sprint 09.3: BMOM & Confidence (Days 11-15)

### Tasks
| ID | Task | Effort |
|----|------|--------|
| 09.3.1 | Create BMOMExtractor transformation | 6h |
| 09.3.2 | Build BMOM storage and API | 4h |
| 09.3.3 | Implement ConfidenceScorer service | 6h |
| 09.3.4 | Create ReviewQueueService for low confidence | 6h |
| 09.3.5 | Build review queue UI | 8h |
| 09.3.6 | Add BMOM display components | 4h |
```

---

### Phase 10: Sensitivity & Privacy Engine (NEW)

**Duration:** 2 weeks (10 working days)  
**Priority:** ðŸ”´ CRITICAL  
**Purpose:** Implement PRD privacy requirements

```markdown
## Sprint 10.1: Sensitivity Framework (Days 1-5)

### Tasks
| ID | Task | Effort |
|----|------|--------|
| 10.1.1 | Create sensitivity metadata schema | 4h |
| 10.1.2 | Implement SensitivityService | 6h |
| 10.1.3 | Add sensitivity inheritance logic | 4h |
| 10.1.4 | Create context permission checks | 6h |
| 10.1.5 | Add AI access control middleware | 6h |
| 10.1.6 | Implement "secret" content blocking | 4h |

### Sensitivity Schema
```typescript
// packages/@sbf/privacy-engine/src/types.ts

export enum SensitivityLevel {
  PUBLIC = 'public',         // Shareable anywhere
  PERSONAL = 'personal',     // Local only (default)
  CONFIDENTIAL = 'confidential', // Encrypted at rest
  SECRET = 'secret',         // Never processed by AI
}

export interface ContextPermissions {
  cloud_ai_allowed: boolean;
  local_ai_allowed: boolean;
  export_allowed: boolean;
  sync_allowed: boolean;
  share_allowed: boolean;
}

export interface SensitivityConfig {
  level: SensitivityLevel;
  permissions: ContextPermissions;
  inherit_from_parent: boolean;
  override_by?: string; // User who last overrode
  override_at?: Date;
}

// Default permissions by sensitivity level
export const DEFAULT_PERMISSIONS: Record<SensitivityLevel, ContextPermissions> = {
  [SensitivityLevel.PUBLIC]: {
    cloud_ai_allowed: true,
    local_ai_allowed: true,
    export_allowed: true,
    sync_allowed: true,
    share_allowed: true,
  },
  [SensitivityLevel.PERSONAL]: {
    cloud_ai_allowed: false,
    local_ai_allowed: true,
    export_allowed: true,
    sync_allowed: true,
    share_allowed: false,
  },
  [SensitivityLevel.CONFIDENTIAL]: {
    cloud_ai_allowed: false,
    local_ai_allowed: true,
    export_allowed: false,
    sync_allowed: false,
    share_allowed: false,
  },
  [SensitivityLevel.SECRET]: {
    cloud_ai_allowed: false,
    local_ai_allowed: false,
    export_allowed: false,
    sync_allowed: false,
    share_allowed: false,
  },
};
```

## Sprint 10.2: Privacy UI & Audit (Days 6-10)

### Tasks
| ID | Task | Effort |
|----|------|--------|
| 10.2.1 | Create SensitivityPicker component | 4h |
| 10.2.2 | Add sensitivity indicators to all lists | 4h |
| 10.2.3 | Build privacy audit log | 6h |
| 10.2.4 | Create AI access audit dashboard | 6h |
| 10.2.5 | Add bulk sensitivity update UI | 4h |
| 10.2.6 | Implement privacy settings page | 4h |
```

---

### Phase 11: Integrations & CLI (NEW)

**Duration:** 3 weeks (15 working days)  
**Priority:** ðŸŸ¡ HIGH  
**Purpose:** External tool compatibility per PRD

```markdown
## Sprint 11.1: Obsidian Integration (Days 1-7)

### Tasks
| ID | Task | Effort |
|----|------|--------|
| 11.1.1 | Create Obsidian plugin skeleton | 4h |
| 11.1.2 | Implement folder structure sync | 8h |
| 11.1.3 | Add wikilink resolution | 6h |
| 11.1.4 | Create Dataview query support | 8h |
| 11.1.5 | Add frontmatter metadata sync | 6h |
| 11.1.6 | Build backlink management | 6h |
| 11.1.7 | Test with Obsidian graph view | 4h |

## Sprint 11.2: CLI Tool (Days 8-12)

### Tasks
| ID | Task | Effort |
|----|------|--------|
| 11.2.1 | Create CLI skeleton with Commander.js | 4h |
| 11.2.2 | Implement `sbf init` command | 4h |
| 11.2.3 | Implement `sbf entity create` commands | 6h |
| 11.2.4 | Add `sbf search` command | 4h |
| 11.2.5 | Create `sbf sync` for API connection | 6h |
| 11.2.6 | Add `sbf migrate` from other PKM | 8h |

### CLI Structure
```bash
sbf init                     # Initialize SBF folder structure
sbf entity create person     # Create entity from template
sbf entity list --type topic # List entities
sbf search "query"           # Search across content
sbf file <note> --to project-xyz  # File note to entity
sbf lifecycle process        # Run lifecycle transitions
sbf migrate --from obsidian  # Migration wizard
sbf sync                     # Sync with SBF API
```

## Sprint 11.3: Migration Tools (Days 13-15)

### Tasks
| ID | Task | Effort |
|----|------|--------|
| 11.3.1 | Create Obsidian vault analyzer | 6h |
| 11.3.2 | Build Notion export converter | 6h |
| 11.3.3 | Add Roam Research importer | 4h |
| 11.3.4 | Create migration progress UI | 4h |
| 11.3.5 | Add migration validation & rollback | 4h |
```

---

## Part 4: Updated Timeline Summary

| Phase | Original Duration | Additional Tasks | Revised Duration |
|-------|-------------------|------------------|------------------|
| Phase 00 | 16 days | +4 tasks | 18 days |
| Phase 01 | 14 days | +4 tasks | 16 days |
| Phase 02 | 16 days | +4 tasks | 18 days |
| Phase 03 | 12 days | +4 tasks | 14 days |
| Phase 04 | 20 days | +5 tasks | 24 days |
| Phase 05 | 18 days | +4 tasks | 20 days |
| Phase 06 | 21 days | +2 tasks | 22 days |
| Phase 07 | 18 days | +3 tasks | 20 days |
| Phase 08 | 28 days | +3 tasks | 30 days |
| **Phase 09** | NEW | Progressive Org | 15 days |
| **Phase 10** | NEW | Privacy Engine | 10 days |
| **Phase 11** | NEW | Integrations | 15 days |

**Original Total:** 163 working days (~33 weeks)  
**Revised Total:** 222 working days (~44 weeks)

---

## Part 5: Quick Wins (Implement Immediately)

These can be added to existing sprints with minimal effort:

| Quick Win | Effort | Phase | Impact |
|-----------|--------|-------|--------|
| Add `sensitivity` field to all entities | 2h | 00 | ðŸ”´ HIGH |
| Add `truth_level` field to all entities | 2h | 00 | ðŸ”´ HIGH |
| Add `lifecycle_state` field to notes | 2h | 00 | ðŸ”´ HIGH |
| Create UID generator utility | 4h | 00 | ðŸŸ¡ MEDIUM |
| Add sensitivity filter to AI calls | 4h | 01 | ðŸ”´ HIGH |
| Add BMOM template to transformations | 4h | 03 | ðŸŸ¡ MEDIUM |
| Add relationship type dropdown to UI | 4h | 04 | ðŸŸ¡ MEDIUM |
| Add lifecycle badge component | 2h | 04 | ðŸŸ¡ MEDIUM |
| Add confidence score display | 2h | 05 | ðŸŸ¡ MEDIUM |

---

## Part 6: Opportunity Enhancements

### 6.1 Mobile Companion App

**Opportunity:** PRD mentions future mobile apps for voice capture  
**Implementation:** React Native app with voice transcription  
**Phase:** Post-Phase 11  
**Effort:** 4-6 weeks

### 6.2 Real-Time Collaboration

**Opportunity:** Multi-user notebooks  
**Implementation:** WebSocket-based presence and conflict resolution  
**Phase:** Post-Phase 11  
**Effort:** 4 weeks

### 6.3 Plugin Marketplace

**Opportunity:** PRD mentions plugin system  
**Implementation:** Custom transformations, entity types, integrations  
**Phase:** Post-Phase 11  
**Effort:** 3 weeks

### 6.4 AI Agent Framework

**Opportunity:** BMAD-style agent orchestration  
**Implementation:** Multi-agent workflows for research tasks  
**Phase:** Post-Phase 11  
**Effort:** 4 weeks

### 6.5 Offline-First PWA

**Opportunity:** PRD emphasizes local-first  
**Implementation:** Service worker + IndexedDB for offline  
**Phase:** Phase 08  
**Effort:** 2 weeks

---

## Part 7: Risk Assessment Updates

| Risk | Original Likelihood | Updated Likelihood | Mitigation Status |
|------|--------------------|--------------------|-------------------|
| Scope creep | High | High | Need strict phase gating |
| PRD feature gap | N/A | ðŸ”´ Critical | This document addresses |
| Timeline extension | Medium | High | 11 weeks additional |
| Complexity overload | Medium | High | Modular phase design |
| Team capacity | Medium | High | May need parallel tracks |

---

## Conclusion

The NextGen phases (00-08) provide excellent infrastructure but **miss critical PRD differentiators** that make Second Brain Foundation unique:

1. **Progressive Organization** - The 48-hour lifecycle and entity filing system
2. **Privacy-First Design** - Sensitivity tiers and AI access control
3. **BMOM Framework** - Meaning extraction for knowledge management
4. **Tool Compatibility** - Obsidian, CLI, and migration tools

Adding Phases 09-11 addresses these gaps and transforms SBF from "yet another notebook app" to a **true second brain platform** with unique competitive advantages.

---

*Sanity Check Amendment V2.0*  
*BMad Orchestrator Party Mode*  
*Analysis Complete: December 28, 2025*
